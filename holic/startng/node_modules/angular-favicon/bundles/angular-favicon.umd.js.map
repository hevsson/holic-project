{"version":3,"file":"angular-favicon.umd.js.map","sources":["ng://angular-favicon/lib/angular-favicon.service.ts"],"sourcesContent":["import { Injectable, Inject, OnDestroy } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { ÉµgetDOM as getDOM } from '@angular/platform-browser';\nimport { fromEventPattern, Subscription } from 'rxjs';\nimport { pluck } from 'rxjs/operators';\n\n/**\n * A service to set the favicon.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class AngularFaviconService implements OnDestroy {\n  constructor(@Inject(DOCUMENT) private _doc: any) {}\n\n  private darkScheme = '(prefers-color-scheme:dark)';\n  private subscriptionToColorScheme: Subscription;\n  private prefersColorScheme$ = fromEventPattern(handler => window.matchMedia(this.darkScheme).addListener(handler as EventListener)).pipe(\n    pluck('matches')\n  );\n\n  /**\n   * Get the favicon of the current HTML document.\n   */\n  getFavicon() {\n    return getDOM().querySelector(this._doc, \"link[rel*='icon']\");\n  }\n\n  /**\n   * Set the title of the current HTML document.\n   * @param iconURL - Default favicon URL\n   * @param altIconURL - Optional, dark theme favicon URL\n   */\n  setFavicon(iconURL: string, altIconURL?: string) {\n    const link = this.getFavicon() || getDOM().createElement('link');\n    let currentLinkHref = iconURL;\n\n    if (altIconURL) {\n      this.subscribeToChangesInTheme(link, iconURL, altIconURL);\n\n      if (window.matchMedia(this.darkScheme).matches) {\n        currentLinkHref = altIconURL;\n      }\n    }\n\n    this.appendLinkTag(link, currentLinkHref);\n  }\n\n  /**\n   * Subscribe to the theme color changes in browser/OS and apply the appropiate favicon\n   * @param link - DOM element\n   * @param iconURL - Default favicon URL\n   * @param altIconURL - Optional, dark theme favicon URL\n   */\n  private subscribeToChangesInTheme(link: any, iconURL: string, altIconURL: string) {\n    this.subscriptionToColorScheme = this.prefersColorScheme$.subscribe(isDarkTheme => {\n      if (isDarkTheme) {\n        this.appendLinkTag(link, altIconURL);\n      } else {\n        this.appendLinkTag(link, iconURL);\n      }\n    });\n  }\n\n  /**\n   * Append new link to HEAD\n   * @param link - DOM element\n   * @param iconURL - favicon URL\n   */\n  private appendLinkTag(link: any, iconURL: string) {\n    link.type = 'image/x-icon';\n    link.rel = 'shortcut icon';\n    link.href = iconURL;\n    getDOM()\n      .getElementsByTagName(this._doc, 'head')[0]\n      .appendChild(link);\n  }\n\n  ngOnDestroy() {\n    this.subscriptionToColorScheme.unsubscribe();\n  }\n}\n"],"names":["fromEventPattern","pluck","getDOM","Injectable","Inject","DOCUMENT"],"mappings":";;;;;;;;;;AAAA;;;AASA;QAIE,+BAAsC,IAAS;YAA/C,iBAAmD;YAAb,SAAI,GAAJ,IAAI,CAAK;YAEvC,eAAU,GAAG,6BAA6B,CAAC;YAE3C,wBAAmB,GAAGA,qBAAgB;;;eAAC,UAAA,OAAO,IAAI,OAAA,MAAM,CAAC,UAAU,CAAC,KAAI,CAAC,UAAU,CAAC,CAAC,WAAW,oBAAC,OAAO,GAAkB,GAAA,EAAC,CAAC,IAAI,CACtIC,eAAK,CAAC,SAAS,CAAC,CACjB,CAAC;SANiD;;;;;;;;QAWnD,0CAAU;;;;YAAV;gBACE,OAAOC,uBAAM,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,mBAAmB,CAAC,CAAC;aAC/D;;;;;;;;;;;;QAOD,0CAAU;;;;;;YAAV,UAAW,OAAe,EAAE,UAAmB;;oBACvC,IAAI,GAAG,IAAI,CAAC,UAAU,EAAE,IAAIA,uBAAM,EAAE,CAAC,aAAa,CAAC,MAAM,CAAC;;oBAC5D,eAAe,GAAG,OAAO;gBAE7B,IAAI,UAAU,EAAE;oBACd,IAAI,CAAC,yBAAyB,CAAC,IAAI,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC;oBAE1D,IAAI,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,OAAO,EAAE;wBAC9C,eAAe,GAAG,UAAU,CAAC;qBAC9B;iBACF;gBAED,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,eAAe,CAAC,CAAC;aAC3C;;;;;;;;;;;;;;;QAQO,yDAAyB;;;;;;;;YAAjC,UAAkC,IAAS,EAAE,OAAe,EAAE,UAAkB;gBAAhF,iBAQC;gBAPC,IAAI,CAAC,yBAAyB,GAAG,IAAI,CAAC,mBAAmB,CAAC,SAAS;;;mBAAC,UAAA,WAAW;oBAC7E,IAAI,WAAW,EAAE;wBACf,KAAI,CAAC,aAAa,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;qBACtC;yBAAM;wBACL,KAAI,CAAC,aAAa,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;qBACnC;iBACF,EAAC,CAAC;aACJ;;;;;;;;;;;;;QAOO,6CAAa;;;;;;;YAArB,UAAsB,IAAS,EAAE,OAAe;gBAC9C,IAAI,CAAC,IAAI,GAAG,cAAc,CAAC;gBAC3B,IAAI,CAAC,GAAG,GAAG,eAAe,CAAC;gBAC3B,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC;gBACpBA,uBAAM,EAAE;qBACL,oBAAoB,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC;qBAC1C,WAAW,CAAC,IAAI,CAAC,CAAC;aACtB;;;;QAED,2CAAW;;;YAAX;gBACE,IAAI,CAAC,yBAAyB,CAAC,WAAW,EAAE,CAAC;aAC9C;;oBAvEFC,aAAU,SAAC;wBACV,UAAU,EAAE,MAAM;qBACnB;;;;;wDAEcC,SAAM,SAACC,WAAQ;;;;oCAb9B;KASA;;;;;;;;;;;;;;;;;;;;;;"}
